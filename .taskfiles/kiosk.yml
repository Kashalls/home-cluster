---

version: "3"

vars:
  KIOSK_PLAYBOOK_DIR: "{{.ANSIBLE_DIR}}/kiosk/playbooks"
  KIOSK_INVENTORY_DIR: "{{.ANSIBLE_DIR}}/kiosk/inventory"

tasks:
  install:
    desc: Install Grafana Kiosk
    cmds:
      - "echo '{{.ANSIBLE_CONFIG}}'"
      - "ansible-galaxy install -r {{.ANSIBLE_DIR}}/kiosk/requirements.yml --force"
      - "ansible-playbook {{.KIOSK_PLAYBOOK_DIR}}/install-grafana-kiosk.yaml -i {{.KIOSK_INVENTORY_DIR}}/hosts.yaml --ask-pass"

  update:
    desc: Install Grafana Kiosk
    cmds:
      - "echo '{{.ANSIBLE_CONFIG}}'"
      - "ansible-galaxy install -r {{.ANSIBLE_DIR}}/kiosk/requirements.yml --force"
      - "ansible-playbook {{.KIOSK_PLAYBOOK_DIR}}/install-grafana-kiosk.yaml -i {{.KIOSK_INVENTORY_DIR}}/hosts.yaml"